language: python
python:
- '3.6'
install:
- pip install ansible==2.3.0 molecule apache-libcloud
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/credentials.json"
  global:
  - secure: UPr2etH/P6CJ5upN/QEqz88en6GZbAJ/b9y4t81OfVdFQ0+eQRv/07Vfwf3xyqt3R7+sc+/gJPiO5xAHEG6oSGPTmNGET1sJo8eiH1YUMJECLcDy5gylAkK0yhMBOXdOCyZqMGLk8wGoA5pPtNd8VCqYtX4rxtNfOhRwKY7Z+raZPtHnZOmAofR8cGBoA9ttZOfiVdgoRuH3JORIM9EE7ml4nZqSkhiz6Z1c/ZcfHkPYSPw49mbQKjLwH5fQInADjKBztLieNEAzjgplG3lbEpvChMh/Ii3rErDSsyJFC17l2pX6xmhVIER9OmX/S+AJaJ9TrhDQTE03goprto6oTCW+toX1Jz5H1Z4rjPqjcWkO/aBKtyMLMDh5KAJTaYa1BChAWuqelB4aXduwAbtTMxMO8Nm1EjFDthqCS0zX2ozIc3wdNAWqxDJbU2pnrvn3jAkpvrFXbu63rul6k6m7LmILDc770+lfqLeEtz5KZG+qcZkDoDIW3iTmQ4F06GONXNucUUz3zrQEALXMTIKOfcxj+zM9Nyq5Yn9kC4Af096dH4a2vcejLioVg6hABh06VAZAu34PbrZlB2vsWOv0jsRsM5stUP5Hdir4gZChe6bLbBWRG+9QBhYCus4okFwbshBjjeqqNkwWY9/eBNM18PJ5iYybJXwCZLQCtKZqtG8=
  - secure: fYTjrefE1wa9g/NMIOE97UxMaWxmhgH1w3lyfu7+Ma2eCQX66/osoG6cGJABJpEHy6UZrQjC/1GKt6ZWqbnxWd0PHqpIxYR/QeuPJu2EA9S7X2VBJy/h+s1dnlctMW1ZTSyntW0HuWOL+bdNHdHzEiOV7hHTU/lZ2IOjyUSPLnld+1iPR9I+YNMdGrDyeCOO4TG8tzic3rxzXIbsr+KaRZyMqyeaWRunPGfBK2TMCw0OKo6/Kjj+XHe7IJSll2GSU+olW4Xyw4xUXEv2c2f7CeLMoonvrMFLOdWBynitSoEnzYjjPFvJ/NKrlyfIwu5jt9w/e4cjiB1GOvH2p9jPcIvCN1jdUw2xE9gubyDEaWC4GodrtwMXc0SyUmi0PcrDfOvwP5KJGpS6PaCB61S31TOCYxVJhabBf8mjw2OJDNNHt1opxJU/lTrDmIYETk0oUF+CuUKNdd5SJrG7QCNwjHvxaFbiqJvMLH5+EPPZkRlzKFMiI9joCA5EteJu9obhx7A/nMgyZ3FHW/oOLRww0dw3/8m2P+OwscJahET9cu0k3uZahGDrDzYvtQ4iM3gHlSsrtf0XX5wMTS82JBI7aCzPQ5TiyGpsZiv1ao4OWBMX+REKbLZguIH22Yzv6GSNl8wSjjb8ysmUw8RqvTTyP/1NeP+UfAFXqxXlzdT5qn0=
  - secure: d1WkLs6wX+PA3dHXaf+CgAgDKsUbcIxTnqUBBskZXOHvEPSws7p0ffC3RxhqZ6AopCulZwGmlNZPBCgUu8pQqqW7Tgd5xzhMCdOPlRAWVc7s+8mX4V2Y3IsboZAKR/MpIbdf+l4l3hsOJU7ROsS4KrxPXoDtN4EsrF/lfULoTwVHN0NZzehYEcO5vk/zhuLsErN3vkrgLWMyMNSxWL/wtIImABplR1O8IYCb5ksXMLqrRZkUEXKW/txR3MlSHy6AJQfCj9m481SZrGTLW7SqAJ0lLqYu9DlIiKE93yBftVlnz+jof8dMLnB3gd1VA+4g1vWByZ9FXvmMIobdi76mgpqDPMFSbQNDZMa0P3vOLcdY5Tpaqd1/Z9dcFPKIiJa20Meb+Coz1FpsUBahWBC9DcD3DG9n7+xXmgR5C0Nzf965HF575fvY31lGIrXlwSJYn07NV5IHkvzdOnHBd2Fdv1qUikSqji5ECiteZqfi9LHWFwwOPJgEV6Q04ueNfLLg4XVQcMw68Q5T4dmKVrXHKW410skd2yyKROvCBGKZirLH9WMg95dfPnyCnHGwlFB+g/r8OM9WbdjZgijHvZtdR2eQ+tR0aYqqJ59JeSDP1iyP/CHo9g3fDHpv1k8cpyJjLRvDK/zNjcYAhT5j/3b+llQwbaj6MQXzyHsQAcJhhds=
script:
- molecule create
- molecule converge
- molecule verify
after_script:
- molecule destroy
before_install:
- openssl aes-256-cbc -K $encrypted_9b640e841e7c_key -iv $encrypted_9b640e841e7c_iv -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
notifications:
  slack:
    secure: xlQ5NWrGWenFE5E7M9m9FIebcbo5Lg17gSGCftl135brltT9w05fvAdBKOPmE5uZxgcrUNxJeUl3MWLuwHVaXHJECqNWmSfTLQ7D/GvnDpxgXyL4kvQlri7lujXBaC2ticSs0NSPfQA3JTewj76mypZQq4bfGQ4anXfyhhH+mlPdUOSYoVitE/qnqryUIskgvSfC3M2AIOcmBSVJFoN6L28l4Ld9qIVfh7oV1OpqeUk62BUoLMuRq8OZWUqFqiTLD9KrmegJlqdx7Ixh4z0nJ96Zvr3x7/6DLtxTv6IfcyWIWi4xda7Ym5Am6RiaO45WyAX/sxt24imb+b1BHmP8fcIg0yN8LgI+iAFveGan4IvEDVzbp63muVnng7zbtPyWKaK4qAmBm5C/IavSNMTv6mIBjc9HAZgV42jUWLnzpHjgjGJT3JMUTzp2IPk4H6XlZPQ1tfwuwe9IUujydyWZgdsJmcYAeuqPE3kLXBeVFQrilE5/itd2m68w6bQ1Gw9u9Gfq9JAxlcT7SZ8UIzq9NI0cQSm3nGo3AfxIoBKpiVwl9uA483RdhzowejR7f9WbOkQbdUYb2XOy5rh3njt6C71MNADgLRmpaIsty4agFAp4FZ/gEGsVUYcVjdpLLXIO3gMdS34WEQZBdhWsP2ApVTV9n87Bakq1k4XV/7mKefY=
